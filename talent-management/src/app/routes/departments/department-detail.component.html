<page-header></page-header>

<mat-card *ngIf="!loading && department">
  <mat-card-header>
    <mat-card-title>Department Details</mat-card-title>
    <div class="flex-spacer"></div>
    <button
      mat-raised-button
      color="accent"
      (click)="editDepartment()"
      *appHasRole="['HRAdmin', 'Manager']">
      <mat-icon>edit</mat-icon>
      Edit
    </button>
    <button
      mat-raised-button
      color="warn"
      (click)="deleteDepartment()"
      *appHasRole="['HRAdmin', 'Manager']">
      <mat-icon>delete</mat-icon>
      Delete
    </button>
    <button mat-stroked-button (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
      Back to List
    </button>
  </mat-card-header>

  <mat-card-content>
    <div class="detail-grid">
      <div class="detail-section">
        <h3>Basic Information</h3>
        <mat-divider></mat-divider>
        <mat-list>
          <mat-list-item>
            <span matListItemTitle>Department Name</span>
            <span matListItemLine>{{ department.name }}</span>
          </mat-list-item>
        </mat-list>
      </div>

      <div class="detail-section" *ngIf="department.createdAt || department.lastModifiedAt">
        <h3>Audit Information</h3>
        <mat-divider></mat-divider>
        <mat-list>
          <mat-list-item *ngIf="department.createdAt">
            <span matListItemTitle>Created At</span>
            <span matListItemLine>{{ department.createdAt | date:'medium' }}</span>
          </mat-list-item>
          <mat-list-item *ngIf="department.lastModifiedAt">
            <span matListItemTitle>Last Modified At</span>
            <span matListItemLine>{{ department.lastModifiedAt | date:'medium' }}</span>
          </mat-list-item>
        </mat-list>
      </div>
    </div>
  </mat-card-content>
</mat-card>

<mat-card *ngIf="loading">
  <mat-card-content>
    <div class="loading-container">
      <mat-spinner></mat-spinner>
    </div>
  </mat-card-content>
</mat-card>

<mat-card *ngIf="!loading && !department">
  <mat-card-content>
    <div class="no-data">
      <mat-icon>error</mat-icon>
      <p>Department not found</p>
      <button mat-raised-button color="primary" (click)="goBack()">
        Go Back
      </button>
    </div>
  </mat-card-content>
</mat-card>
